package com.revworkforce.service;

import java.sql.Date;
import com.revworkforce.dao.PerformanceDAO;

public class PerformanceService {

    private PerformanceDAO dao = new PerformanceDAO();

    public void submitReview(int empId,
                             int year,
                             String del,
                             String ach,
                             String imp,
                             int rating) throws Exception {

        dao.createReview(empId, year, del, ach, imp, rating);
        System.out.println("Performance review created");
    }

    public void createGoal(int empId,
                           String desc,
                           Date deadline,
                           String priority,
                           String metrics) throws Exception {

        int reviewId = dao.getLatestReviewId(empId);
        dao.createGoal(reviewId, desc, deadline, priority, metrics);
        System.out.println("Goal added successfully");
    }

    public void viewMyGoals(int empId) throws Exception {
        dao.viewMyGoals(empId);
    }

    public void updateGoalProgress(int goalId, int progress) throws Exception {
        dao.updateGoalProgress(goalId, progress);
        System.out.println("Goal progress updated");
    }

    public void viewManagerFeedback(int empId) throws Exception {
        dao.viewManagerFeedback(empId);
    }
    public void viewTeamReviews(int managerId) throws Exception {
        dao.viewTeamReviews(managerId);
    }

    public void giveManagerFeedback(int reviewId,
                                    int rating,
                                    String feedback) throws Exception {

        if (rating < 1 || rating > 5)
            throw new Exception("Rating must be between 1 and 5");

        dao.giveManagerFeedback(reviewId, rating, feedback);
    }
}
