package com.revworkforce.service;

import java.sql.ResultSet;
import com.revworkforce.dao.NotificationDAO;

public class NotificationService {

    private NotificationDAO dao = new NotificationDAO();

    public void showUnreadOnLogin(int empId) throws Exception {

        ResultSet rs = dao.getUnread(empId);
        boolean found = false;

        System.out.println("\n--- New Notifications ---");

        while (rs.next()) {
            found = true;
            System.out.println("- " + rs.getString("MESSAGE"));
        }

        if (!found)
            System.out.println("No new notifications");
    }

    public void viewNotifications(int empId) throws Exception {

        ResultSet rs = dao.getAll(empId);

        while (rs.next()) {
            System.out.println(
                rs.getString("MESSAGE") + " | " +
                rs.getDate("CREATED_AT")
            );
        }

        dao.markRead(empId);
    }
}
